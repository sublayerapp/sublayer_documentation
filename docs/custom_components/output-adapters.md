---
title: Generator Output Adapters
parent: Custom Components
nav_order: 1
---
# Custom Output Adapters

Output adapters in Sublayer are powerful components that define the structure and format of the AI-generated output. They serve as a bridge between the raw AI responses and the structured data your application expects.

## Overview

Custom Output Adapters allow you to customize how your generator's output is formatted, providing flexibility in how you handle the data generated by the AI models. 

### The Output Adapter Interface

To create an output adapter in Sublayer, you need to implement the following interface:

**Required Properties**
- `name`: A string that provides a name for the high-level information you're expecting to receive from the LLM
- `description`: A string that elaborates on what that name represents. This is also sent to the LLM to provide more context on what you're expecting to receive

**Required Methods**
- `initialize`: A method that initializes the output adapter with at least the name and description properties.
- `properties`: A method that returns a single-element array of `OpenStruct` objects representing the properties of the output. Each element needs at least a `name`, `description`, and `type` property and follows JSON spec. This is used for defining the function call in the LLM.

**Optional Methods**
- `load_instance_data(generator)`: A method to load data from the generator to be used in the output adapter. Useful for passing a list of items for selection or additional data required by the adapter.
- `materialize_result(raw_result)`: A method that receives the raw results from the LLM and returns a transformation of it, such as instantiating objects or converting formats.

## Creating a Custom Output Adapter

```ruby
class MyCustomOutputAdapter
  def initialize(name:, description:)
    @name = name
    @description = description
  end

  def properties
    [OpenStruct.new(name: @name, type: 'string', description: @description, required: true)]
  end

  def materialize_result(raw_result)
    # Example transformation
    raw_result.upcase
  end

end
```

### Usage in a Generator

For custom output adapters, you can pass the class directly into the `llm_output_adapter` method in the Generator:

```ruby
class MyGenerator < Sublayer::Generators::Base
  llm_output_adapter class: MyCustomOutputAdapter,
    name: "Custom Name",
    description: "Custom Description"

  # ... rest of the generator code
end
```

## Practical Example

Let's say you want to create an output adapter that converts AI-generated strings to integers. Your adapter might look like this:

```ruby
class StringToIntegerAdapter
  def initialize(name:, description:)
    @name = name
    @description = description
  end

  def properties
    [OpenStruct.new(name: @name, type: 'integer', description: @description, required: true)]
  end

  def materialize_result(raw_result)
    raw_result.to_i
  end
end
```

## Example Built-in Adapters

Below are links to the built-in output adapters in Sublayer that are fully tested against example generators. You can use these as a reference when building your own output adapters.

- [Single String](https://github.com/sublayerapp/sublayer/blob/e57d4e44117cec6e6c0f750d53b499df7bc66ca1/lib/sublayer/components/output_adapters/single_string.rb)
- [List of Strings](https://github.com/sublayerapp/sublayer/blob/e57d4e44117cec6e6c0f750d53b499df7bc66ca1/lib/sublayer/components/output_adapters/list_of_strings.rb)
- [String Selection from List](https://github.com/sublayerapp/sublayer/blob/e57d4e44117cec6e6c0f750d53b499df7bc66ca1/lib/sublayer/components/output_adapters/string_selection_from_list.rb)
- [Named Strings](https://github.com/sublayerapp/sublayer/blob/e57d4e44117cec6e6c0f750d53b499df7bc66ca1/lib/sublayer/components/output_adapters/named_strings.rb)
